<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>elementewerk - Curtain Overlay</title>
  <style>
    /* Grundreset */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; cursor: none; overflow: hidden; }

    /* Overlay */
    .overlay-top, .overlay-bottom {
      position: fixed;
      width: 100%;
      height: 50vh + 2px;
      background-color: #B9B9B9;
      z-index: 9999;
      transition: clip-path 0.8s cubic-bezier(0.34,1.56,0.64,1);
      clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
    }
    .overlay-top { top: 0; }
    .overlay-bottom { top: 50vh; }

    .overlay-top.open { clip-path: polygon(0 -1px, 100% -1px, 100% 0, 0 0); }
    .overlay-bottom.open { clip-path: polygon(0 100%, 100% 100%, 100% 101%, 0 101%); }

    /* Custom Cursor */
    .custom-cursor {
      position: fixed;
      width: 80px;
      height: 80px;
      border: 2px solid rgba(255,255,255,0.8);
      border-radius: 50%;
      pointer-events: none;
      z-index: 10000;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.65rem;
      font-weight: 600;
      text-align: center;
      color: rgba(255,255,255,0.8);
      padding: 8px;
      line-height: 1.2;
      transition: opacity 0.3s ease;
    }
    .custom-cursor.hidden { opacity: 0; pointer-events: none; }

    @media (max-width: 768px) {
      .custom-cursor { width: 70px; height: 70px; font-size: 0.6rem; }
    }
  </style>
</head>
<body>
  <div class="overlay-top"></div>
  <div class="overlay-bottom"></div>
  <div class="custom-cursor"></div>

  <script>
    const overlayTop = document.querySelector('.overlay-top');
    const overlayBottom = document.querySelector('.overlay-bottom');
    const customCursor = document.querySelector('.custom-cursor');

    let isOpen = false;
    let lastScrollTime = 0;
    const SCROLL_COOLDOWN = 300;

    // Touch detection
    const isTouchDevice = () => 'ontouchstart' in window || navigator.maxTouchPoints > 0;
    const isTouch = isTouchDevice();
    customCursor.textContent = isTouch ? 'swipe to start' : 'scroll to start';
    if (isTouch) customCursor.classList.add('hidden');

    // Cursor movement
    document.addEventListener('mousemove', e => {
      if (!isTouch) {
        customCursor.style.left = (e.clientX - 40) + 'px';
        customCursor.style.top = (e.clientY - 40) + 'px';
      }
    });

    // Öffnen/Schließen Curtain
    function openCurtain() {
      if (isOpen) return;
      overlayTop.classList.add('open');
      overlayBottom.classList.add('open');
      isOpen = true;

      // Page scroll erlauben nach Animation
      setTimeout(() => document.body.style.overflow = 'auto', 800);
      customCursor.style.pointerEvents = 'none';
    }

    function closeCurtain() {
      if (!isOpen) return;
      overlayTop.classList.remove('open');
      overlayBottom.classList.remove('open');
      isOpen = false;

      // Scroll blocken während Animation
      document.body.style.overflow = 'hidden';
      setTimeout(() => document.body.style.overflow = 'auto', 800);
      customCursor.style.pointerEvents = 'auto';
    }

    // Scroll / Wheel Events
    document.addEventListener('wheel', e => {
      const now = Date.now();
      if (now - lastScrollTime < SCROLL_COOLDOWN) return;

      // Nur schließen, wenn ganz oben
      if (window.scrollY <= 0 && e.deltaY < 0) {
        closeCurtain();
      } else if (e.deltaY > 0 && !isOpen) {
        openCurtain();
      }
      lastScrollTime = now;
    }, { passive: false });

    // Touch Events
    let touchStart = 0;
    document.addEventListener('touchstart', e => touchStart = e.touches[0].clientY, { passive: true });
    document.addEventListener('touchmove', e => {
      if (!touchStart) return;
      const touchEnd = e.touches[0].clientY;
      const diff = touchStart - touchEnd;
      if (Math.abs(diff) > 50) {
        if (window.scrollY <= 0 && diff < 0) {
          closeCurtain();
        } else if (diff > 0 && !isOpen) {
          openCurtain();
        }
        touchStart = 0;
      }
    }, { passive: true });
  </script>
</body>
</html>
